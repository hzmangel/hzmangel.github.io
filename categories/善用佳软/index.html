<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <meta property="og:title" content=" 善用佳软 &middot;  湖间小筑" />
        <meta property="og:site_name" content="湖间小筑" />
        <meta property="og:url" content="http://hzmangel.github.io/categories/e59684e794a8e4bdb3e8bdaf/" />

        
            <meta property="og:type" content="website" />
        

        <title>
            湖间小筑
            
                | 善用佳软
            
        </title>

        <meta name="description" content="" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">

        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/atelier-dune.dark.min.css">

        <link rel="stylesheet" type="text/css" href="http://hzmangel.github.io/css/screen.css" />

        
          <link href="http://hzmangel.github.io/categories/%E5%96%84%E7%94%A8%E4%BD%B3%E8%BD%AF/index.xml" rel="alternate" type="application/rss+xml" title="湖间小筑" />
          <link href="http://hzmangel.github.io/categories/%E5%96%84%E7%94%A8%E4%BD%B3%E8%BD%AF/index.xml" rel="feed" type="application/rss+xml" title="湖间小筑" />
        

        <link rel="canonical" href="http://hzmangel.github.io/categories/e59684e794a8e4bdb3e8bdaf/" />
    </head>

    <body>
        <div class="container" id="site-wrapper">
            <header>
    <div class="row">
        <div class="col-md-6" id="site-title">
            <a href="http://hzmangel.github.io/" title="湖间小筑" rel="home"><h2>湖间小筑</h2></a>
        </div>

        <div class="col-md-6" id="site-description">
            <i class="text-right muted"><div id="site-description">蓝天，小湖，湖水中一方小筑</div></i>
        </div>
    </div>

    <img src="/img/banner.jpg" class="img-responsive">
</header>

            <nav role="navigation">

</nav>





<div class="row">
    <div class="col-md-9">
        
            <article class="post">

    <header>
        <h2 class="post-title"><a href='http://hzmangel.github.io/post/724/'> 让win下的vim支持非等宽字体</a> </h2>
        <div class="post-meta">发表于2010-08-23 13:08:03 </div>
    </header>

    <section>
        <div class="post-summary">最近vim升级到了7.3，很喜欢它的相对行号功能(:h rnu)，于是就升级了，然后就毫无悬念的出问题了~ 问题的原因是之前用的vim72是个改版，加上了对非等宽字体的支持，于是在vim中可以将guifontwide设置为YaHei Consolas的混合字体，不过这次升级后没找到原作者的网站，只好自己动手了。 改动在os_mswin.c中，进去后直接找mono，会看到一处注释说忽略非等宽字体，把下面那行注释掉就好，这是diff文件： diff -r 96b2b1cca7cd src/os_mswin.c --- a/src/os_mswin.c Mon Aug 23 12:55:47 2010 +0800 +++ b/src/os_mswin.c Mon Aug 23 13:05:17 2010 +0800 @@ -3288,8 +3288,11 @@ #ifndef FEAT_PROPORTIONAL_FONTS /* Ignore non-monospace fonts without further ado */ + /* + * hzmangel: I need non-monospace fonts! if ((ntm-&gt;tmPitchAndFamily &amp; 1) != 0) return 1; + */ #endif /* Remember this LOGFONT as a &quot;possible&quot; */ 然后直接在vs2010编译环境中用bigvim.bat来编译vim即可，如有需要可以对其中的参数进行修改。写完，收工~ Update at 2010-09-18 在xbeta的帮助下试着编译了一个可以支持取词的版本，用的是这篇文章的方法 感谢Dieken@newsmth，手边没有金山，用有道测试了一下支持取词。目前的版本相比于官方有如下改动：支持非等宽 字体，支持取词，但是去掉了Perl/Lua/Ruby/Tcl的支持（因为编译的机器上没装这些软件）。支持取词改动的diff文件如下 diff -r 6768ebd0bc04 -r 213b33df021a src/gui_w32.c --- a/src/gui_w32.c Sun Aug 08 16:38:42 2010 +0200 +++ b/src/gui_w32.c Sat Sep 18 10:37:41 2010 +0800 @@ -2298,7 +2298,11 @@ /* On NT, tell the font renderer not to &quot;help&quot; us with Hebrew and Arabic * text.</div>
    </section>

    
        <footer>
            <p><a href='http://hzmangel.github.io/post/724/'><nobr>继续阅读 →</nobr></a></p>
        </footer>
    

</article>

        
            <article class="post">

    <header>
        <h2 class="post-title"><a href='http://hzmangel.github.io/post/721/'> Merge Two Hg Repositories</a> </h2>
        <div class="post-meta">发表于2010-07-09 01:54:31 </div>
    </header>

    <section>
        <div class="post-summary">最近在折腾手头上的小项目，发现有一个工程已经建了Hg的版本库，但是想把它给丢到现有的版本库中以方便管理。假设现在用的版本库叫A，需要被merge过来的版本库 叫B，于是有： A: hg pull –f &lt;repo B&gt; A: hg merge A: hg ci 关键的地方是在那个- f处，如果没有加这个参数会报两个版本库不同源而不让你这么折腾。(via)</div>
    </section>

    

</article>

        
            <article class="post">

    <header>
        <h2 class="post-title"><a href='http://hzmangel.github.io/post/584/'> Simple Process with Mercurial Build-in Server</a> </h2>
        <div class="post-meta">发表于2010-03-10 21:54:02 </div>
    </header>

    <section>
        <div class="post-summary">在putty里面用vim用够了，于是在远端机上弄了个Hg的版本库，平时在本机做开发，然后写完直接push到远端编译。不想折腾太多的东西，所以就用的是Hg自带 的web服务器。首先在远端某个目录里面新建一个Hg版本库 hg init 然后就可以在远端开服务了，为了少惹麻烦，用了个3456的端口 hg serve -p3456 然后在本地就可以找个目录直接把那边的东西拷过来了 hg clone &lt;host&gt; &lt;local_dir&gt; 使用hg clone的好处是在目录的.hg/hgrc文件中已经存放有默认提交/连接的地址，以后在使用hg pull或者hg push时不需要额外提供地址了。 [paths] default = &lt;host&gt;:&lt;port&gt; 在本地做过修改后，需要check in到版本库中才能成功的被push到远端。如果不加-m参数则会弹出一个编辑器让你输入log hg ci &lt;-m &quot;log message&quot;&gt; 在push的时候需要注意一个问题。为了安全起见，在默认情况下，Hg对于push是有一些限制的，首先需要SSL，其次需要提交改动的用户有权限。不过由于是自己使 用嘛，所以可以在Hg的配置文件中把这两个限制取消，即在hgrc中加入以下几行 [web] push_ssl = false allow_push = * 根据自己的需求确定这几行加的位置（全局的配置还是某项目相关的配置）。添加过后即可在本地push改动到远端了。如果那个url已经添加到hgrc文件中，则不需要 指定url参数（嗯，适合我这种懒人）。 hg push &lt;url&gt; 在远端此时只是把改动更新到版本库中，并没有把改动真正放到代码中，所以还要在远端运行一下更新命令 hg up 然后，就能编译了，于是一次简单的流程就完鸟。如果在远端有改动，在check in到版本库后，可以在本地使用pull命令把改动同步过来。 hg pull &lt;url&gt;</div>
    </section>

    

</article>

        
            <article class="post">

    <header>
        <h2 class="post-title"><a href='http://hzmangel.github.io/post/491/'> Vim居中光标所在行</a> </h2>
        <div class="post-meta">发表于2009-12-04 11:12:41 </div>
    </header>

    <section>
        <div class="post-summary">曾经用Emacs的时候发现那个Ctrl- L特别好用，看到光标在下面了按一下就把那行提到屏幕中间来了，于是想在vim中找类似的功能，想想也该有嘛，所以就找到了，而且有三条~ zz: 将当前行置于屏幕中间（不是转载…） zt: 将当前行置于屏幕顶端（不是猪头~） zb：底端啦~ 还有一条就是移动光标所在行的位置，就是说，比如我光标在第10行，我想光标不动，但是所在行向上移，ctrl-e啦，然后向下的话，ctrl-y~</div>
    </section>

    

</article>

        
            <article class="post">

    <header>
        <h2 class="post-title"><a href='http://hzmangel.github.io/post/490/'> Vim中的大小写切换</a> </h2>
        <div class="post-meta">发表于2009-12-04 01:07:05 </div>
    </header>

    <section>
        <div class="post-summary">在vim中，通过v选中的文字可以用u切换到小写，U切换到大写，~在大小写之间切换，但是如果需要对选定的词做大小写操作，就需要用到%s中的\u,\U,\l和\ L，\u是把后续的字符串第一个字符转成大写而\U是把后续的都转成大写(upper case)，\l和\L是转成小写(lower case) 例如如果要把所有行首的单词首字母大写后面的所有字母都小写，可以这么折腾： :%s/^\(\w\)\(.*\)/\u\1\L\2/g 需要注意的一点是，如果\L和\U后面跟有别的字符串，也会被弄成大写，如对字符串abcdefg运行 %s/abcd/\Uefgh/g 的结果就是 EFGHefg，这一点在使用反向引用\1, \2等的时候比较麻烦，例如我\1取到的是一个单词，我需要把它们都大写化了，然后后面的\2也会被变成大写。刚好下午 试的是给变量改名字，在需要变大写的单词后面有一条下划线，于是就这么用了： :%s/\([a-z]\)\(.*\)/\U\1\l\2/g \l 对下划线没影响，刚好用来抵消 \U 的作用，满好，至于别的情况，暂时没想法……</div>
    </section>

    

</article>

        
            <article class="post">

    <header>
        <h2 class="post-title"><a href='http://hzmangel.github.io/post/487/'> Vim中的非贪婪匹配</a> </h2>
        <div class="post-meta">发表于2009-11-02 17:35:40 </div>
    </header>

    <section>
        <div class="post-summary">折腾了一个HTML文件，想把标签中一些不要的属性去掉，直接的话就直接匹配到行末了，想想vim这么高级的东西应该支持非贪婪匹配吧，于是在google和自带帮助 的指引下折腾出来了。其实很简单，在:h non-greedy一条中有说，使用{-}来匹配，和*的功能类似，于是乎就有： 默认贪婪匹配到行末：/&lt;a.*&gt; 使用非贪婪匹配本标签：/&lt;a.\{-}&gt;</div>
    </section>

    

</article>

        
            <article class="post">

    <header>
        <h2 class="post-title"><a href='http://hzmangel.github.io/post/302/'> Error 0x800704b8 While Installing IPv6</a> </h2>
        <div class="post-meta">发表于2008-06-12 23:39:06 </div>
    </header>

    <section>
        <div class="post-summary">最近想在自己机器上装个v6的协议栈做开发，但是单位装机的thinkpad上居然没有v6的协议栈，真郁闷，只好自己装，可惜在ipv6 install的时候，给直接报了个错，Error 0x800704b8，这回可是碰到问题了，一开始以为是机器权限的问题，可是问了旁边那哥们，他说他装上了，用的某条命令后，但是命令忘了，于是 google 之。 其实，碰上这个问题的人很多，那条命令也很简单。问题是windows安全数据库出问题了，Windows安全数据库，在%WinDir%\Security\dat abase里，具体存放的内容，暂时没时间去找，呵呵。Windowz提供了一个 esentutl 的工具用以检查修复这玩意。具体用的到的命令是 esentutl /p %windir%\security\Database\secedit.sdb ，/p表示修复，后面是具体的数据库，然后再安装，于是就行了。 汗Windowz，好歹也说清楚点出错的地方啊&hellip;&hellip;</div>
    </section>

    

</article>

        
            <article class="post">

    <header>
        <h2 class="post-title"><a href='http://hzmangel.github.io/post/297/'> Org mode under WinEmacs</a> </h2>
        <div class="post-meta">发表于2008-05-27 23:44:34 </div>
    </header>

    <section>
        <div class="post-summary">虽然前几天折腾上了muse，但是又在网上看到了另一个org mode，而且以前也看别人提过一次，说它的表格功能很好用，所以心又痒了，于是乎，下载，安装。 和muse一样，解压后，在配置文件中加上两行就行了，一行指定org的el文件存放的位置，另一行设定对于org后缀的文件，使用org-mode打开。 新建一个foo.org的文件，然后开写，用的也是类似outline的模式，而且对每级都有不同的颜色，好看。比较方便的是光标放在哪个标题栏上按&lt;TAB&amp; gt;可以控制此级标题的显示与隐藏，很方便的一个功能。还有就是在它下面可以用-/+/*来显示无级列表，用1.来显示编号的列表，写完一个列表后按&lt;M-C R&gt;，它会在下面给添加一个同级的列表，如果是无序的则加一个标记，如果是有序的则数字加1，然后按&lt;M-LEFT&gt;和&lt;M-RIGHT&amp;g t;可以控制列表缩进的层次，说真的，比Word下那让人莫名其妙的列表层次要好多了。它还支持导出，&lt;C-c&gt;&lt;C-e&gt;后会有一个buf fer告诉你有啥命令可用，可以导出的格式还是满多的，不过目前我的需求，大概就是HTML了吧，还没弄明白能不能给代码加高亮，过过再折腾吧，最近先用它来记笔记。 一会再看看用它来做一下TODO。 再说说表格，由于目前还没怎么用到表格功能，所以只是从教程中感受到了它的方便与强大，而且还有计算功能，过段时间再折腾吧。 发现自己已经开始逐渐喜欢上了这个邪恶的Emacs了，呵呵。</div>
    </section>

    

</article>

        
            <article class="post">

    <header>
        <h2 class="post-title"><a href='http://hzmangel.github.io/post/287/'> vim中删除包含某关键字的行</a> </h2>
        <div class="post-meta">发表于2008-05-11 19:57:30 </div>
    </header>

    <section>
        <div class="post-summary">今天在BBS上逛，看到篇文章不错，但是我只要它中间某几行，先试的是g/XXX/p，但是觉得它输出的内容不好看，我也不知道怎么弄到别的缓冲区中去，于是想把不包括这个关键字的行给删了。想找一个类似grep -v的命令，查了一下，可以用g!/XXX/d，那个!表示不包含，最后的那个d表示删除，不错，嗯。</div>
    </section>

    

</article>

        
            <article class="post">

    <header>
        <h2 class="post-title"><a href='http://hzmangel.github.io/post/286/'> TortoiseHg中设置diff工具</a> </h2>
        <div class="post-meta">发表于2008-05-08 23:06:11 </div>
    </header>

    <section>
        <div class="post-summary">装了个TortoiseHg用来控 制本地的一些代码，自然需要配置一下diff的工具，它默认的visusal diff工具刚装上点了没啥反应，于是上网找。它的安装包中倒是带了一个kdiff3， 但是用来比较两个文件比较不好用，主要是自己想用vim做diff，所以需要配置一下。去它的wiki转了一圈，知道是要配置TortoiseHg安装文件夹下的Me rcurial.ini文件。首先需要改[extensions]节的配置，把使用hgext.extdiff = !的感叹号去掉，表示启用这个扩展，然后在下面[ extdiff]一节中，配置一下cmd.XXX，其中XXX是将来需要在上面设置的命令的别名，然后设置好cmd.XXX=&lt;Command&gt;，如果需 要参数，则要加上opts.XXX=&lt;args&gt;。参数默认中有要比较两个文件名，所以不需要加上文件名。例如如果需要使用vim做比较，我是这么写的： cmd.vimdiff = [path /]\gvim.exe opts.vimdiff = -d 然后可以在图形界面里面设置，也可以在配置文件中编写，里面会列出在cmd中写的命令，选择好后点visual diff就可以了。它会把当前工作版本和版本库中的版本做比较，目前还没有试怎么与特定版本做比较，用到再说，嗯。</div>
    </section>

    

</article>

        

        <nav id="pager">
    <div class="row">
        <div class="col-md-6">
            
        </div>

        <div class="col-md-6">
            
                <h4 class="text-right"><a href="/categories/e59684e794a8e4bdb3e8bdaf/page/2/">下一页</a></h4>
            
        </div>
    </div>
</nav>


    </div>

    <div class="col-md-3">
        <aside id="sidebar">

    <div class="sidebar-block">
        <h5>新鲜出炉</h5>
        <ul class="list-unstyled">
        
            <li><a href='http://hzmangel.github.io/post/new-github-blog/'> Blog搬(zhe)家(teng)记</a></li>
        
            <li><a href='http://hzmangel.github.io/post/1239/'> Control Goroutines amount via bufferred channel</a></li>
        
            <li><a href='http://hzmangel.github.io/post/1233/'> Golang and JSON API</a></li>
        
            <li><a href='http://hzmangel.github.io/post/1230/'> goroutines &#43; channel</a></li>
        
            <li><a href='http://hzmangel.github.io/post/1224/'> Save base64 image with carrierwave and bootstrap-wysiwyg</a></li>
        
        </ul>
    </div>

    <div class="sidebar-block">
        <h5>分类</h5>
        <ul class="list-unstyled">
        
            <li><a href="/categories/btup">btup</a> &nbsp;(23)</li>
        
            <li><a href="/categories/happy-coding">happy-coding</a> &nbsp;(79)</li>
        
            <li><a href="/categories/%E5%96%84%E7%94%A8%E4%BD%B3%E8%BD%AF">善用佳软</a> &nbsp;(26)</li>
        
            <li><a href="/categories/%E5%A5%BD%E4%B8%9C%E4%B8%9Clatex">好东东latex</a> &nbsp;(20)</li>
        
            <li><a href="/categories/%E5%B0%8F%E4%BC%81%E9%B9%85linux">小企鹅linux</a> &nbsp;(73)</li>
        
            <li><a href="/categories/%E6%90%AD%E5%95%8A%E6%90%AD%E6%90%AD%E7%94%B5%E8%B7%AF">搭啊搭搭电路</a> &nbsp;(7)</li>
        
            <li><a href="/categories/%E6%9D%82%E4%B9%9D%E6%9D%82%E5%8D%81_">杂九杂十_</a> &nbsp;(140)</li>
        
            <li><a href="/categories/%E6%B8%B8%E6%88%8F%E4%BA%BA%E7%94%9F">游戏人生</a> &nbsp;(13)</li>
        
            <li><a href="/categories/%E9%82%A3%E5%B1%B1%E9%82%A3%E6%B0%B4">那山那水</a> &nbsp;(52)</li>
        
            <li><a href="/categories/%E9%A3%8E%E9%9B%A8%E8%80%83%E7%A0%94%E8%B7%AF">风雨考研路</a> &nbsp;(11)</li>
        
            <li><a href="/categories/%E9%A5%95%E9%A4%AE%E4%B9%8B%E4%BA%AB">饕餮之享</a> &nbsp;(4)</li>
        
        </ul>
    </div>

    <div class="sidebar-block">
        <h5>标签</h5>
        <div id="tag_cloud" data-tags=" ['admin', 4, '/tags/admin'];  ['android', 1, '/tags/android'];  ['base64', 1, '/tags/base64'];  ['blog', 1, '/tags/blog'];  ['carrierwave', 1, '/tags/carrierwave'];  ['dtrace', 1, '/tags/dtrace'];  ['flex', 1, '/tags/flex'];  ['gfw', 1, '/tags/gfw'];  ['golang', 3, '/tags/golang'];  ['ios', 6, '/tags/ios'];  ['java', 1, '/tags/java'];  ['javascript', 2, '/tags/javascript'];  ['jqplot', 1, '/tags/jqplot'];  ['jquery', 2, '/tags/jquery'];  ['linux', 15, '/tags/linux'];  ['meta', 1, '/tags/meta'];  ['objc', 1, '/tags/objc'];  ['performance', 1, '/tags/performance'];  ['php', 1, '/tags/php'];  ['programming', 46, '/tags/programming'];  ['python', 7, '/tags/python'];  ['rails', 8, '/tags/rails'];  ['regexp', 1, '/tags/regexp'];  ['ruby', 4, '/tags/ruby'];  ['tools', 7, '/tags/tools'];  ['vim', 4, '/tags/vim'];  ['仙剑', 1, '/tags/%E4%BB%99%E5%89%91'];  ['十渡', 1, '/tags/%E5%8D%81%E6%B8%A1'];  ['工作', 3, '/tags/%E5%B7%A5%E4%BD%9C'];  ['徒步', 16, '/tags/%E5%BE%92%E6%AD%A5'];  ['总结', 4, '/tags/%E6%80%BB%E7%BB%93'];  ['感想', 7, '/tags/%E6%84%9F%E6%83%B3'];  ['摄影', 14, '/tags/%E6%91%84%E5%BD%B1'];  ['旅行', 27, '/tags/%E6%97%85%E8%A1%8C'];  ['游戏', 1, '/tags/%E6%B8%B8%E6%88%8F'];  ['电影', 1, '/tags/%E7%94%B5%E5%BD%B1'];  ['骑行', 8, '/tags/%E9%AA%91%E8%A1%8C']; " />
    </div>

</aside>



    </div>
</div>

        <footer class="site-footer clearfix">
            <div id="colophon">
                <section class="col-md-7">Copyright - ©2015 - hzmangel</section>
                
                    <i class="text-right"><section class="col-md-5">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/hzmangel/hugo-twenty-ten">ported Twenty Ten</a> theme</section></i>
                
            </div>
        </footer>

        <script src="http://code.jquery.com/jquery-git2.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>

        <script type="text/javascript" src="http://hzmangel.github.io/js/index.js"></script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-1847567-5', 'auto');
            ga('send', 'pageview');
        </script>

    </div> 

</body>
</html>

