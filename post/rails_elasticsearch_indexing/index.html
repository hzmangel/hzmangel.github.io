<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta property="og:title" content="Integrate Rails with Elasticsearch - Indexing
 &#183;  湖间小筑"><meta property="og:site_name" content="湖间小筑"><meta property="og:url" content="http://hzmangel.github.io/post/rails_elasticsearch_indexing/"><meta property="og:type" content="article"><meta property="og:article:published_time" content="2016-02-23T00:52:42+08:00"><meta property="og:article:tag" content="Programming"><meta property="og:article:tag" content="Rails"><meta property="og:article:tag" content="RubyOnRails"><meta property="og:article:tag" content="StudyLog"><meta property="og:article:tag" content="Elasticsearch"><title>湖间小筑
| Integrate Rails with Elasticsearch - Indexing</title><meta name=description content="蓝天，小湖，湖水中一方小筑"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css integrity=sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk crossorigin=anonymous><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/styles/default.min.css><link rel=stylesheet type=text/css href=http://hzmangel.github.io/css/screen.css><link rel=canonical href=http://hzmangel.github.io/post/rails_elasticsearch_indexing/></head><body><div class=container-md id=site-wrapper><header><div class=row><div class=col-md-6 id=site-title><a href=http://hzmangel.github.io/ title=湖间小筑 rel=home><h2>湖间小筑</h2></a></div><div class=col-md-6 id=site-description><i class="text-right muted"><div id=site-description>蓝天，小湖，湖水中一方小筑</div></i></div></div><img src=/img/banner.jpg class=img-responsive></header><nav role=navigation></nav><div class=row><div class=col-md-9><section><article class=post><header><h2 class=post-title><a href=http://hzmangel.github.io/post/rails_elasticsearch_indexing/>Integrate Rails with Elasticsearch - Indexing</a></h2><div class=post-meta>发表于2016-02-23 00:52:42</div></header><section><div class=post-summary><p>之前写Rails在查找这块一般都是用DB内置的查询，不过上次试了下用 Elasticsearch ，比之前想像的要简单，记点东西在这吧。</p><p>这篇东西会包含下面几项内容：</p><ul><li>安装 Elasticsearch</li><li>关联 Rails 与 Elasticsearch</li><li>配置索引内容</li><li>Custom Analyzer</li></ul><p>本文没有完整系统的介绍，更多的只是一些使用技巧。详细说明请参见<a href>官方文档</a>。</p><h2 id=安装elasticsearch>安装Elasticsearch</h2><p>两种方法，从官网下编译好的<a href=https://www.elastic.co/guide/en/elasticsearch/reference/current/_installation.html>二进制解压</a>，或者用<a href=https://www.elastic.co/guide/en/elasticsearch/reference/master/setup-repositories.html>操作系统的安装源</a>。如果是OSX，可以使用 <em>homebrew</em> 安装，命令为 <code>brew install elasticsearch</code> ，安装后的启动可以使用 <code>brew info elasticsearch</code> 查看。</p><p>安装并启动服务后，可以用下面的命令查看系统是否成功启动：</p><pre><code>$ curl -X GET 'http://localhost:9200'
</code></pre><p>如果一切正常，会返回服务器的状态信息。</p><hr><h2 id=关联-rails-与-elasticsearch>关联 Rails 与 Elasticsearch</h2><h3 id=gem>Gem</h3><p>Elasticsearch提供了两个Gem用于和Rails集成，分别是 <a href=https://github.com/elastic/elasticsearch-rails><em>elasticsearch-rails</em></a> 和 <a href=https://github.com/elastic/elasticsearch-rails/tree/master/elasticsearch-model><em>elasticsearch-model</em></a> 。其中， <em>elasticsearch-rails</em> 为 Rails 的模块加入了 Elasticsearch 的功能，而 <em>elasticsearch-model</em> 则为 Ruby 的类提供了一些简化的连接 <em>Elasticsearch</em> 的方法，使得相应的类可以通过 <code>__elasticsearch__</code> 直接访问 <em>Elasticsearch</em> 服务器的资源。</p><h3 id=model---enable-indexes-in-elasticsearch>Model - Enable indexes in Elasticsearch</h3><p>由于 Elasticsearch 是一个单独的服务器，所以在使用前需要考虑以下几点：</p><ul><li>有哪些Model需要被索引</li><li>每个Model有哪些字段需要被索引</li><li>如何在数据库中记录更新后同步 Elasticsearch 的索引</li></ul><p>如果不使用 Elasticsearch 提供的 gem，需要手动去完成上面的几个步骤，但是上面提到的两个 gem 提供了一系列方便使用的函数。代码的东西对着说比较好弄，所以这里有一个 <a href>Demo Project</a>，对着来说吧。</p><p>这个app就是一个简单的blog，由于只是为了介绍 Elasticsearch ，所以只引入了最简单的部分。</p><p>在 <code>app/models/blog.rb</code> 中可以看到，需要索引一个 model 需要三步：</p><ol><li>在代码中加入 Elasticsearch 的模块。</li><li>设置需要索引的模块。</li><li>导入数据至 Elasticsearch 。</li></ol><p>对于需要索引的Model，只需要在代码中加上几行即可以调用 Elasticsearch 的功能。可以在 <code>app/models/blog.rb</code> 中看到下面的代码：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby>require <span style=color:#e6db74>&#39;elasticsearch/model&#39;</span>

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Blog</span> <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>ActiveRecord</span><span style=color:#f92672>::</span><span style=color:#66d9ef>Base</span>
  <span style=color:#66d9ef>include</span> <span style=color:#66d9ef>Elasticsearch</span><span style=color:#f92672>::</span><span style=color:#66d9ef>Model</span>
<span style=color:#66d9ef>end</span>
</code></pre></div><p>在加入了这几行代码后，这个Model就可以通过 <code>__elasticsearch__</code> 来调用Elasticsearch的API了。例如：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#66d9ef>Blog</span><span style=color:#f92672>.</span>__elasticsearch__<span style=color:#f92672>.</span>client<span style=color:#f92672>.</span>cluster<span style=color:#f92672>.</span>health
</code></pre></div><p>至此，只是在Blog中导入了一些Elasticsearch相关的配置，但是还没有将具体的数据导入到Elasticsearch服务器中。可以使用下面的命令导入数据：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#66d9ef>Blog</span><span style=color:#f92672>.</span>import <span style=color:#e6db74>force</span>: <span style=color:#66d9ef>true</span>
</code></pre></div><p>或者逐步完成：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#66d9ef>Blog</span><span style=color:#f92672>.</span>__elasticsearch__<span style=color:#f92672>.</span>create_index! <span style=color:#e6db74>force</span>: <span style=color:#66d9ef>true</span>
<span style=color:#66d9ef>Blog</span><span style=color:#f92672>.</span>__elasticsearch__<span style=color:#f92672>.</span>refresh_index!
</code></pre></div><p>但是由于 Elasticsearch 的索引是和model分开存放的，所以在每次数据有更新时，需要手动更新所更新文档的索引。如下所示：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#66d9ef>Blog</span><span style=color:#f92672>.</span>first<span style=color:#f92672>.</span>__elasticsearch__<span style=color:#f92672>.</span>index_document
</code></pre></div><p>不过Elasticsearch提供了Callback的方式来处理这些操作，只需要在Model中加入如下代码：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#66d9ef>include</span> <span style=color:#66d9ef>Elasticsearch</span><span style=color:#f92672>::</span><span style=color:#66d9ef>Model</span><span style=color:#f92672>::</span><span style=color:#66d9ef>Callbacks</span>
</code></pre></div><p>即可在每次数据有更新时，自动更新索引。在Gem的文档中还有一些更详细的用法，如异步索引，自定义索引等供查阅。</p><p>在数据导入完成后即可尝试在 Elasticsearch 查找导入的数据了：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#66d9ef>Blog</span><span style=color:#f92672>.</span>search(<span style=color:#e6db74>&#39;*&#39;</span>)<span style=color:#f92672>.</span>records<span style=color:#f92672>.</span>records
</code></pre></div><h3 id=model---choose-indexed-fields>Model - Choose indexed fields</h3><p>默认情况下，所有字段都会被加入 Elasticsearch 的索引。但是在实际使用情况中，可能会碰到只索引某些数据的场景。 Elasticsearch 提供了一个函数用来指定需要索引的字段以及对应的值。函数的名称是 <code>as_indexed_json</code> 。这个函数是在 <code>Elasticsearch::Model::Serializing</code> 定义的，如果需要定制，直接在Model中重新定义自己的函数就好。如下所示：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby>require <span style=color:#e6db74>&#39;elasticsearch/model&#39;</span>

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Blog</span> <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>ActiveRecord</span><span style=color:#f92672>::</span><span style=color:#66d9ef>Base</span>
  <span style=color:#66d9ef>include</span> <span style=color:#66d9ef>Elasticsearch</span><span style=color:#f92672>::</span><span style=color:#66d9ef>Model</span>

  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>as_indexed_json</span>(options <span style=color:#f92672>=</span> {})
    as_json(
      <span style=color:#e6db74>only</span>: <span style=color:#f92672>[</span><span style=color:#e6db74>:title</span>, <span style=color:#e6db74>:content</span><span style=color:#f92672>]</span>
    )
  <span style=color:#66d9ef>end</span>
<span style=color:#66d9ef>end</span>
</code></pre></div><p>在上面的例子中，无论我的Blog记录中还有什么字段，只有 <em>title</em> 和 <em>content</em> 字段会被放入 Elasticsearch 的索引中，也只有这两个字段会返回在查询的结果中。除了内置字段外，还支持将函数中方法的返回值也加入索引中，如下所示：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby>require <span style=color:#e6db74>&#39;elasticsearch/model&#39;</span>

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Blog</span> <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>ActiveRecord</span><span style=color:#f92672>::</span><span style=color:#66d9ef>Base</span>
  <span style=color:#66d9ef>include</span> <span style=color:#66d9ef>Elasticsearch</span><span style=color:#f92672>::</span><span style=color:#66d9ef>Model</span>

  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>as_indexed_json</span>(options <span style=color:#f92672>=</span> {})
    as_json(
      <span style=color:#e6db74>only</span>: <span style=color:#f92672>[</span><span style=color:#e6db74>:title</span>, <span style=color:#e6db74>:content</span><span style=color:#f92672>]</span>,
      methods: <span style=color:#f92672>[</span><span style=color:#e6db74>:author_name</span>, <span style=color:#e6db74>:tag_count</span><span style=color:#f92672>]</span>,
    )
  <span style=color:#66d9ef>end</span>
<span style=color:#66d9ef>end</span>
</code></pre></div><p>此时在索引的字段和返回的结果中，会多出 <em>author_name</em> 以及 <em>tag_count</em> 的返回值。这种方式可以指定关联记录的索引信息。除此之外，还可以在 <code>include</code> 中使用嵌套的字段来标明关系记录。例如：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby>require <span style=color:#e6db74>&#39;elasticsearch/model&#39;</span>

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Blog</span> <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>ActiveRecord</span><span style=color:#f92672>::</span><span style=color:#66d9ef>Base</span>
  <span style=color:#66d9ef>include</span> <span style=color:#66d9ef>Elasticsearch</span><span style=color:#f92672>::</span><span style=color:#66d9ef>Model</span>

  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>as_indexed_json</span>(options <span style=color:#f92672>=</span> {})
    as_json(
      <span style=color:#e6db74>only</span>: <span style=color:#f92672>[</span><span style=color:#e6db74>:title</span>, <span style=color:#e6db74>:content</span><span style=color:#f92672>]</span>,
      <span style=color:#66d9ef>include</span>: { <span style=color:#e6db74>author</span>: {<span style=color:#e6db74>only</span>: <span style=color:#e6db74>:name</span>}, <span style=color:#e6db74>tag</span>: {methods: <span style=color:#f92672>[</span><span style=color:#e6db74>:count</span><span style=color:#f92672>]</span>} }
    )
  <span style=color:#66d9ef>end</span>
<span style=color:#66d9ef>end</span>
</code></pre></div><p>至此，基本的索引构建应该差不多了，在调用过 <em>import</em> 后，就可以用基本的查询功能去查找了。</p><h2 id=analyzer-和-mapping><em>Analyzer</em> 和 <em>Mapping</em></h2><h3 id=analyzer><em>Analyzer</em></h3><p>对每一条被索引的内容， ES 都会通过 <em>Analyzer</em> 把内容分词后放入服务器（因为ES中是使用 <a href=https://zh.wikipedia.org/wiki/%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%95>反向索引</a> 来查找的，而反向索引的 <em>token</em> 就是输入文字经过 <em>Analyzer</em> 处理的结果）。而在查询时，如果是全文检索，那么 ES 会将和分析内容时使用的相同的 <em>Analyzer</em> 应用于检索词上，并将分词后的检索词用于查找以提高查找的准确性。而如果查询的类型是精确匹配， ES 将不会处理检索词。</p><p>根据 <a href=https://www.elastic.co/guide/en/elasticsearch/guide/current/analysis-intro.html>文档</a> 的介绍，每一个 <em>Analyzer</em> 由 <strong>3</strong> 步组成，分别是：</p><ul><li><em>Character filters</em> : 对输入的内容按字符处理，包含有 <em>Mapping Char Filter</em>, <em>HTML Strip Char Filter</em> 和 <em>Pattern Replace Char Filter</em> ，具体介绍请参阅 <a href=https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-charfilters.html>文档</a></li><li><em>Tokenizer</em> : 分词器，根据不同的规则，将输入内容分为不同的 token ，<a href=https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-tokenizers.html>文档</a></li><li><em>Token filters</em> : 应用于上面分割开的 <em>token</em> 上的 filter。 <a href=https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-tokenfilters.html>文档</a></li></ul><p>ES 还提供了一些内置的 <em>Analyzer</em> ，可以在 <a href=https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-analyzers.html>这里</a> 查到。由于 Rails 中的代码实例会牵涉到 <em>Mapping</em> 相关的内容，所以会在下一节中贴代码。</p><h3 id=mapping><em>Mapping</em></h3><p>对于输入的文本内容，ES会默认将此字段映射为 <em>string</em> 类型，并使用 <em>standard analyzer</em> ，如果需要一些特殊处理，就需要引入 <em>Mapping</em> 了。 <em>Mapping</em> 的作用是告诉 ES 某个字段需要按什么样的规则处理。例如一个手机号， ES 的默认处理是按长整形，但是可能需要按字符串处理，这时就需要指定 <em>Mapping</em> 了。</p><p>在 Rails 的 Model 中，可以通过下面的方法来设置字段的 <em>Analyzer</em> 和 <em>Mapping Type</em> ，如下所示：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby>settings <span style=color:#66d9ef>do</span>
  mappings <span style=color:#66d9ef>do</span>
    indexes <span style=color:#e6db74>:title</span>, <span style=color:#e6db74>analyzer</span>: <span style=color:#e6db74>&#39;english&#39;</span>
  <span style=color:#66d9ef>end</span>
<span style=color:#66d9ef>end</span>
</code></pre></div><p>在上述的例子中，原本 <em>title</em> 字段的 <em>analyzer</em> 被指定为 <em>english</em> 而不是默认的 <em>string</em> 。</p><p>Q: 为什么设定了type后，import返回值为1，而不设的时候返回是0？</p></div></section><footer><div class=post-meta>分类：<ul class=list-inline><li class=list-inline-item><a href=/categories/happy-coding>Happy coding</a></li></ul></div><div class=post-meta>标签：<ul class=list-inline><li class=list-inline-item><a href=/tags/programming><span class="label label-default">Programming</span></a></li><li class=list-inline-item><a href=/tags/rails><span class="label label-default">Rails</span></a></li><li class=list-inline-item><a href=/tags/rubyonrails><span class="label label-default">RubyOnRails</span></a></li><li class=list-inline-item><a href=/tags/studylog><span class="label label-default">StudyLog</span></a></li><li class=list-inline-item><a href=/tags/elasticsearch><span class="label label-default">Elasticsearch</span></a></li></ul></div><br><nav class=post-meta><a class=previous href=http://hzmangel.github.io/post/different_auth_method_in_rails_api/>&lt; Use Different Auth Method In Rails API Controller</a>
<a class=next href=http://hzmangel.github.io/post/rails_reload_parent_in_iframe/>Rails - Reload Parent Page in iframe
></a></nav><br></footer></article><div id=disqus_thread></div><script type=text/javascript>var disqus_shortname="hzmangel";(function(){var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;dsq.src='//'+disqus_shortname+'.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript></section></div><div class=col-md-3><aside id=sidebar><div class=sidebar-block><h5>新鲜出炉</h5><ul class=list-unstyled><li><a href=http://hzmangel.github.io/categories/>Categories</a></li><li><a href=http://hzmangel.github.io/categories/happy-coding/>Happy coding</a></li><li><a href=http://hzmangel.github.io/post/>Posts</a></li><li><a href=http://hzmangel.github.io/tags/programming/>Programming</a></li><li><a href=http://hzmangel.github.io/tags/rails/>rails</a></li></ul></div><div class=sidebar-block><h5>分类</h5><ul class=list-unstyled><li><a href=/categories/bt~~up>bt~~up</a> &nbsp;(23)</li><li><a href=/categories/happy-coding>happy-coding</a> &nbsp;(93)</li><li><a href=/categories/%E5%96%84%E7%94%A8%E4%BD%B3%E8%BD%AF>善用佳软</a> &nbsp;(26)</li><li><a href=/categories/%E5%A5%BD%E4%B8%9C%E4%B8%9Clatex>好东东latex</a> &nbsp;(20)</li><li><a href=/categories/%E5%B0%8F%E4%BC%81%E9%B9%85linux>小企鹅linux</a> &nbsp;(73)</li><li><a href=/categories/%E6%90%AD%E5%95%8A%E6%90%AD%E6%90%AD%E7%94%B5%E8%B7%AF>搭啊搭搭电路</a> &nbsp;(7)</li><li><a href=/categories/%E6%9D%82%E4%B9%9D%E6%9D%82%E5%8D%81_>杂九杂十_</a> &nbsp;(140)</li><li><a href=/categories/%E6%B8%B8%E6%88%8F%E4%BA%BA%E7%94%9F>游戏人生</a> &nbsp;(13)</li><li><a href=/categories/%E9%82%A3%E5%B1%B1%E9%82%A3%E6%B0%B4>那山那水</a> &nbsp;(52)</li><li><a href=/categories/%E9%A3%8E%E9%9B%A8%E8%80%83%E7%A0%94%E8%B7%AF>风雨考研路</a> &nbsp;(11)</li><li><a href=/categories/%E9%A5%95%E9%A4%AE%E4%B9%8B%E4%BA%AB>饕餮之享</a> &nbsp;(4)</li></ul></div><div class=sidebar-block><h5>标签</h5><div id=tag_cloud data-tags="['admin', 4, '/tags/admin'];  ['android', 1, '/tags/android'];  ['base64', 1, '/tags/base64'];  ['blog', 1, '/tags/blog'];  ['carrierwave', 1, '/tags/carrierwave'];  ['dtrace', 1, '/tags/dtrace'];  ['elasticsearch', 1, '/tags/elasticsearch'];  ['flex', 1, '/tags/flex'];  ['gfw', 1, '/tags/gfw'];  ['golang', 4, '/tags/golang'];  ['hadoop', 1, '/tags/hadoop'];  ['ios', 6, '/tags/ios'];  ['java', 1, '/tags/java'];  ['javascript', 2, '/tags/javascript'];  ['jqplot', 1, '/tags/jqplot'];  ['jquery', 2, '/tags/jquery'];  ['linux', 15, '/tags/linux'];  ['meta', 1, '/tags/meta'];  ['mmds', 7, '/tags/mmds'];  ['objc', 1, '/tags/objc'];  ['performance', 1, '/tags/performance'];  ['php', 1, '/tags/php'];  ['programming', 60, '/tags/programming'];  ['python', 8, '/tags/python'];  ['rails', 12, '/tags/rails'];  ['regexp', 1, '/tags/regexp'];  ['ruby', 4, '/tags/ruby'];  ['rubyonrails', 4, '/tags/rubyonrails'];  ['studylog', 11, '/tags/studylog'];  ['til', 3, '/tags/til'];  ['tools', 7, '/tags/tools'];  ['vim', 4, '/tags/vim'];  ['仙剑', 1, '/tags/%E4%BB%99%E5%89%91'];  ['十渡', 1, '/tags/%E5%8D%81%E6%B8%A1'];  ['工作', 3, '/tags/%E5%B7%A5%E4%BD%9C'];  ['徒步', 16, '/tags/%E5%BE%92%E6%AD%A5'];  ['总结', 4, '/tags/%E6%80%BB%E7%BB%93'];  ['感想', 7, '/tags/%E6%84%9F%E6%83%B3'];  ['摄影', 14, '/tags/%E6%91%84%E5%BD%B1'];  ['旅行', 27, '/tags/%E6%97%85%E8%A1%8C'];  ['游戏', 1, '/tags/%E6%B8%B8%E6%88%8F'];  ['电影', 1, '/tags/%E7%94%B5%E5%BD%B1'];  ['骑行', 8, '/tags/%E9%AA%91%E8%A1%8C'];"></div></aside></div></div><footer class="site-footer clearfix"><div id=colophon><section class=col-md-7>Copyright - ©2015 - hzmangel</section><i class=text-right><section class=col-md-5>Proudly generated by <a class=icon-hugo href=http://gohugo.io>HUGO</a>, with <a class=icon-theme href=https://github.com/hzmangel/hugo-twenty-ten>ported Twenty Ten</a> theme</section></i></div></footer><script src=https://code.jquery.com/jquery-3.5.1.slim.min.js integrity=sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js integrity=sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js integrity=sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI crossorigin=anonymous></script><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad();</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script type=text/javascript src=http://hzmangel.github.io/js/index.js></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-1847567-5','auto');ga('send','pageview');</script></div></body></html>