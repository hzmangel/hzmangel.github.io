<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta property="og:title" content="rails &#183;  湖间小筑"><meta property="og:site_name" content="湖间小筑"><meta property="og:url" content="http://hzmangel.github.io/tags/rails/"><meta property="og:type" content="website"><title>湖间小筑
| rails</title><meta name=description content="蓝天，小湖，湖水中一方小筑"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css integrity=sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk crossorigin=anonymous><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/styles/default.min.css><link rel=stylesheet type=text/css href=http://hzmangel.github.io/css/screen.css><link href=/tags/rails/index.xml rel=alternate type=application/rss+xml title=rails><link href=/tags/rails/index.xml rel=feed type=application/rss+xml title=rails><link rel=canonical href=http://hzmangel.github.io/tags/rails/></head><body><div class=container-md id=site-wrapper><header><div class=row><div class=col-md-6 id=site-title><a href=http://hzmangel.github.io/ title=湖间小筑 rel=home><h2>湖间小筑</h2></a></div><div class=col-md-6 id=site-description><i class="text-right muted"><div id=site-description>蓝天，小湖，湖水中一方小筑</div></i></div></div><img src=/img/banner.jpg class=img-responsive></header><nav role=navigation></nav><div class=row><div class=col-md-9><article class=post><header><h2 class=post-title><a href=http://hzmangel.github.io/post/grape_n_strong_parameter/>Rails - Fix ActiveModel::ForbiddenAttributesError in grape</a></h2><div class=post-meta>发表于2016-08-10 00:07:40</div></header><section><div class=post-summary><p>最近尝试在 <em>Grape API</em> 中创建一个 <em>ActiveModel</em> ，但是在使用 <code>new</code> 创建的时候发现会报 <code>ActiveModel::ForbiddenAttributesError</code> 错误。想了想估计是碰上了 <em>stronng parameters</em> 的问题。按照之前的经验，那就是给参数加上一个permit，但是发现在调用 <code>permit!</code> 之后，grape的params变成了空字典，从而造成后续的创建出错。在网上找了一圈，结果发现 grape 自己的Github页面上就有说明，如果需要和 Rails 4 一起使用，需要加上 <em>hashie-forbidden_attributes</em> gem。</p></div></section><footer><p><a href=http://hzmangel.github.io/post/grape_n_strong_parameter/><nobr>继续阅读 →</nobr></a></p></footer></article><article class=post><header><h2 class=post-title><a href=http://hzmangel.github.io/post/rails_reload_parent_in_iframe/>Rails - Reload Parent Page in iframe</a></h2><div class=post-meta>发表于2016-04-17 12:59:42</div></header><section><div class=post-summary><p>最近碰到的一个问题，弹出的 iframe 窗口在做完操作并把结果返回给 controller 后，调用 <code>render</code> 或 <code>redirect_to</code> 时都只会刷新 iframe 中的内容，而不会将整个页面都刷新。尝试在 iframe 中提交表单时关闭 iframe 窗口，但是依然无效。最后发现还是需要借助于 Javascript ，最后的解决方案如下：</p></div></section><footer><p><a href=http://hzmangel.github.io/post/rails_reload_parent_in_iframe/><nobr>继续阅读 →</nobr></a></p></footer></article><article class=post><header><h2 class=post-title><a href=http://hzmangel.github.io/post/rails_elasticsearch_indexing/>Integrate Rails with Elasticsearch - Indexing</a></h2><div class=post-meta>发表于2016-02-23 00:52:42</div></header><section><div class=post-summary><p>之前写Rails在查找这块一般都是用DB内置的查询，不过上次试了下用 Elasticsearch ，比之前想像的要简单，记点东西在这吧。</p><p>这篇东西会包含下面几项内容：</p><ul><li>安装 Elasticsearch</li><li>关联 Rails 与 Elasticsearch</li><li>配置索引内容</li><li>Custom Analyzer</li></ul><p>本文没有完整系统的介绍，更多的只是一些使用技巧。详细说明请参见<a href>官方文档</a>。</p></div></section><footer><p><a href=http://hzmangel.github.io/post/rails_elasticsearch_indexing/><nobr>继续阅读 →</nobr></a></p></footer></article><article class=post><header><h2 class=post-title><a href=http://hzmangel.github.io/post/different_auth_method_in_rails_api/>Use Different Auth Method In Rails API Controller</a></h2><div class=post-meta>发表于2016-01-27 23:21:42</div></header><section><div class=post-summary><p>开发的时候碰到一个问题，Rails的controller是用devise来提供认证的，如果用户在访问时没有有效的cookie就会被转到登录界面。但是在API的时候不能用cookie，所以需要分开做验证。</p></div></section><footer><p><a href=http://hzmangel.github.io/post/different_auth_method_in_rails_api/><nobr>继续阅读 →</nobr></a></p></footer></article><article class=post><header><h2 class=post-title><a href=http://hzmangel.github.io/post/1224/>Save base64 image with carrierwave and bootstrap-wysiwyg</a></h2><div class=post-meta>发表于2013-12-01 15:03:37</div></header><section><div class=post-summary><h3 id=tldr>tl;dr</h3><p>The pasted image will be converted to base64 encoded format, which will hit
response size limitation of server. This article is talking about save image
to file with carrierwave.</p><p>The source code is available at <a href=https://github.com/hzmangel/base64_image_carrierwave>github
repo</a></p><p>Next is the full version.</p></div></section><footer><p><a href=http://hzmangel.github.io/post/1224/><nobr>继续阅读 →</nobr></a></p></footer></article><article class=post><header><h2 class=post-title><a href=http://hzmangel.github.io/post/1210/>Uploading multiple attachments with carrierwave/mongoid/nested_form</a></h2><div class=post-meta>发表于2013-05-07 23:30:25</div></header><section><div class=post-summary><p>Recently I have met a requirement that need to upload multiple attachments to
a rails project. After some investigations, I choose <code>carrierwave</code> finally.
Also, I selected <code>nested_form</code> to manage uploading and deleting multiple
attachments.</p></div></section><footer><p><a href=http://hzmangel.github.io/post/1210/><nobr>继续阅读 →</nobr></a></p></footer></article><article class=post><header><h2 class=post-title><a href=http://hzmangel.github.io/post/1205/>Using Rails with Redis</a></h2><div class=post-meta>发表于2013-04-25 16:56:17</div></header><section><div class=post-summary><p>I have met an issue recently that the Rails site always returns 502 error for
some page. After some investigation, I have found that the problem is caused
by a long time query of database, which exceeds the timeout value of unicorn
configuration, then the unicorn worker process will be killed and the Nginx
returns 502 to user.</p><p>So the solution for this kind prblem is to put the job into some background
task, and use some other method to inform the frontend when job done. Finally
I choose the Redis for this task.</p></div></section><footer><p><a href=http://hzmangel.github.io/post/1205/><nobr>继续阅读 →</nobr></a></p></footer></article><article class=post><header><h2 class=post-title><a href=http://hzmangel.github.io/post/1159/>Playing MongoDB with Rails</a></h2><div class=post-meta>发表于2012-06-19 16:07:16</div></header><section><div class=post-summary><p>This post will try to implement a web app used for recording mobile phone of
cheaters. This idea is came from cooler@linuxfb, and I have used this for a
presentation about GAE on 2009, and here is the
<a href=http://www.slideshare.net/linuxfb/20090222-gae-demo-7083477>slide</a>.</p><p>NOTE: Code still under developing, the Git repo is shown at the end of
article.</p></div></section><footer><p><a href=http://hzmangel.github.io/post/1159/><nobr>继续阅读 →</nobr></a></p></footer></article><article class=post><header><h2 class=post-title><a href=http://hzmangel.github.io/post/1147/>Tunning Rails with DTrace</a></h2><div class=post-meta>发表于2012-05-24 09:25:42</div></header><section><div class=post-summary><p>This post will talk about how to do performance test of Rails program with
DTrace tool. The testing will be separated into Ruby program part and database
operations part. Please make sure all the tested program has provided probes
to the DTrace.</p><p><strong>NOTICE</strong>: The testing data is still under collection, this post has only DTrace script now, I will update this post after gathering enough testing data.</p></div></section><footer><p><a href=http://hzmangel.github.io/post/1147/><nobr>继续阅读 →</nobr></a></p></footer></article><article class=post><header><h2 class=post-title><a href=http://hzmangel.github.io/post/1133/>Deploy RoR application with Nginx</a></h2><div class=post-meta>发表于2012-05-11 11:40:52</div></header><section><div class=post-summary><p>This article will talk something about deploying RoR application to local and remote nginx server.</p></div></section><footer><p><a href=http://hzmangel.github.io/post/1133/><nobr>继续阅读 →</nobr></a></p></footer></article><nav id=pager><div class=row><div class=col-md-6></div><div class=col-md-6><h4 class=text-right><a href=/tags/rails/page/2/>下一页</a></h4></div></div></nav></div><div class=col-md-3><aside id=sidebar><div class=sidebar-block><h5>新鲜出炉</h5><ul class=list-unstyled><li><a href=http://hzmangel.github.io/categories/>Categories</a></li><li><a href=http://hzmangel.github.io/categories/happy-coding/>Happy coding</a></li><li><a href=http://hzmangel.github.io/post/>Posts</a></li><li><a href=http://hzmangel.github.io/tags/programming/>Programming</a></li><li><a href=http://hzmangel.github.io/tags/rails/>rails</a></li></ul></div><div class=sidebar-block><h5>分类</h5><ul class=list-unstyled><li><a href=/categories/bt~~up>bt~~up</a> &nbsp;(23)</li><li><a href=/categories/happy-coding>happy-coding</a> &nbsp;(93)</li><li><a href=/categories/%E5%96%84%E7%94%A8%E4%BD%B3%E8%BD%AF>善用佳软</a> &nbsp;(26)</li><li><a href=/categories/%E5%A5%BD%E4%B8%9C%E4%B8%9Clatex>好东东latex</a> &nbsp;(20)</li><li><a href=/categories/%E5%B0%8F%E4%BC%81%E9%B9%85linux>小企鹅linux</a> &nbsp;(73)</li><li><a href=/categories/%E6%90%AD%E5%95%8A%E6%90%AD%E6%90%AD%E7%94%B5%E8%B7%AF>搭啊搭搭电路</a> &nbsp;(7)</li><li><a href=/categories/%E6%9D%82%E4%B9%9D%E6%9D%82%E5%8D%81_>杂九杂十_</a> &nbsp;(140)</li><li><a href=/categories/%E6%B8%B8%E6%88%8F%E4%BA%BA%E7%94%9F>游戏人生</a> &nbsp;(13)</li><li><a href=/categories/%E9%82%A3%E5%B1%B1%E9%82%A3%E6%B0%B4>那山那水</a> &nbsp;(52)</li><li><a href=/categories/%E9%A3%8E%E9%9B%A8%E8%80%83%E7%A0%94%E8%B7%AF>风雨考研路</a> &nbsp;(11)</li><li><a href=/categories/%E9%A5%95%E9%A4%AE%E4%B9%8B%E4%BA%AB>饕餮之享</a> &nbsp;(4)</li></ul></div><div class=sidebar-block><h5>标签</h5><div id=tag_cloud data-tags="['admin', 4, '/tags/admin'];  ['android', 1, '/tags/android'];  ['base64', 1, '/tags/base64'];  ['blog', 1, '/tags/blog'];  ['carrierwave', 1, '/tags/carrierwave'];  ['dtrace', 1, '/tags/dtrace'];  ['elasticsearch', 1, '/tags/elasticsearch'];  ['flex', 1, '/tags/flex'];  ['gfw', 1, '/tags/gfw'];  ['golang', 4, '/tags/golang'];  ['hadoop', 1, '/tags/hadoop'];  ['ios', 6, '/tags/ios'];  ['java', 1, '/tags/java'];  ['javascript', 2, '/tags/javascript'];  ['jqplot', 1, '/tags/jqplot'];  ['jquery', 2, '/tags/jquery'];  ['linux', 15, '/tags/linux'];  ['meta', 1, '/tags/meta'];  ['mmds', 7, '/tags/mmds'];  ['objc', 1, '/tags/objc'];  ['performance', 1, '/tags/performance'];  ['php', 1, '/tags/php'];  ['programming', 60, '/tags/programming'];  ['python', 8, '/tags/python'];  ['rails', 12, '/tags/rails'];  ['regexp', 1, '/tags/regexp'];  ['ruby', 4, '/tags/ruby'];  ['rubyonrails', 4, '/tags/rubyonrails'];  ['studylog', 11, '/tags/studylog'];  ['til', 3, '/tags/til'];  ['tools', 7, '/tags/tools'];  ['vim', 4, '/tags/vim'];  ['仙剑', 1, '/tags/%E4%BB%99%E5%89%91'];  ['十渡', 1, '/tags/%E5%8D%81%E6%B8%A1'];  ['工作', 3, '/tags/%E5%B7%A5%E4%BD%9C'];  ['徒步', 16, '/tags/%E5%BE%92%E6%AD%A5'];  ['总结', 4, '/tags/%E6%80%BB%E7%BB%93'];  ['感想', 7, '/tags/%E6%84%9F%E6%83%B3'];  ['摄影', 14, '/tags/%E6%91%84%E5%BD%B1'];  ['旅行', 27, '/tags/%E6%97%85%E8%A1%8C'];  ['游戏', 1, '/tags/%E6%B8%B8%E6%88%8F'];  ['电影', 1, '/tags/%E7%94%B5%E5%BD%B1'];  ['骑行', 8, '/tags/%E9%AA%91%E8%A1%8C'];"></div></aside></div></div><footer class="site-footer clearfix"><div id=colophon><section class=col-md-7>Copyright - ©2015 - hzmangel</section><i class=text-right><section class=col-md-5>Proudly generated by <a class=icon-hugo href=http://gohugo.io>HUGO</a>, with <a class=icon-theme href=https://github.com/hzmangel/hugo-twenty-ten>ported Twenty Ten</a> theme</section></i></div></footer><script src=https://code.jquery.com/jquery-3.5.1.slim.min.js integrity=sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js integrity=sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js integrity=sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI crossorigin=anonymous></script><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad();</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script type=text/javascript src=http://hzmangel.github.io/js/index.js></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-1847567-5','auto');ga('send','pageview');</script></div></body></html>