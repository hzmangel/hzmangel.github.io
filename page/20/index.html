<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <meta property="og:title" content=" 湖间小筑" />
        <meta property="og:site_name" content="湖间小筑" />
        <meta property="og:url" content="http://hzmangel.github.io/" />

        
            <meta property="og:type" content="website" />
        

        <title>
            湖间小筑
            
                | 蓝天，小湖，湖水中一方小筑
            
        </title>

        <meta name="description" content="" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="http://hzmangel.github.io/css/screen.css" />

        <link rel="canonical" href="http://hzmangel.github.io/" />
    </head>

    <body>
        <div class="container" id="site-wrapper">
            <header>
    <div class="row">
        <div class="col-md-6" id="site-title">
            <a href="http://hzmangel.github.io/" title="湖间小筑" rel="home"><h2>湖间小筑</h2></a>
        </div>

        <div class="col-md-6" id="site-description">
            <i class="text-right muted"><div id="site-description">蓝天，小湖，湖水中一方小筑</div></i>
        </div>
    </div>

    <img src="/img/banner.jpg" class="img-responsive">
</header>

            <nav role="navigation">

</nav>






    <article class="post">

    <header>
        <h2 class="post-title"><a href='http://hzmangel.github.io/post/276/'> 火炬·某独·某投</a> </h2>
        <div class="post-meta">发表于2008-04-10 23:43:24 </div>
    </header>

    <section>
        <div class="post-summary">首先，我承认，把火炬和那两放一起实在太抬高那俩玩意了，真的。 这几天，看了不少这方面的报导，感动于金晶保护火炬的那个瞬间，同时也感动于留学生们的团结。至于那些无良的新闻媒体，不管你们是不是在某首脑的授意下这么做的，能把 事情扭曲成这样，真的很不容易啊。看看那些照片，某独的一个中国人没有，都是一帮闲着无聊的老外在那找抽，顺便赚点外快，对着一帮中国人的解释不听，不过也难怪，留学 生有解释没钱，某独的SB们没有解释但是有钱，所以嘛。今天看到那个free Japan的笑话笑的不行了，虽然基本上清楚他们是什么玩意，但是真的没想到还能玩出这 么有创意的节目。哥们台词没记住好歹也弄个提词的在旁边撒，啥都不懂就表在那装撒，诶。 别的，没啥想说的了，惊异于天朝这次媒体报道的迅速，消息开放了，也和像CNN那种东西对着干起来了，感觉这次天朝的态度比较强硬啊，很好很强大。其实这件事情，也许 是塞翁失马呢，感觉国人开始拧成一起和那帮SB干上了，呵呵。 有段话大家都引，那我也引吧，毛爷爷说过的：&rdquo;如若敌人起劲地反对我们，把我们说得一塌糊涂，一无是处，那就更好了，那就证明我们不但同敌人划清了界线，而且证明我们 的工作是很有成绩的了。&rdquo;其实觉得更应该说的一句话是这样的：&rdquo;明犯强汉者，虽远必诛！&rdquo;是甘延寿、陈汤在西汉末年给汉元帝的奏折中的，同时给上去的还郅支单于的人头 。呵呵，有点愤青了，打住打住。 最后，bless火炬，bless中国，更重要的，是bless我们大家能团结。</div>
    </section>

    

</article>


    <article class="post">

    <header>
        <h2 class="post-title"><a href='http://hzmangel.github.io/post/275/'> 被GAE打击......</a> </h2>
        <div class="post-meta">发表于2008-04-10 18:37:39 </div>
    </header>

    <section>
        <div class="post-summary">本来测试已经没啥问题了，但是，居然，它的那个urlfetch居然功能不全，或者是说那几个提供feed的网站有点啥，不管怎么样，结果就是，我用它的urlfet ch.fetch()抓不到我想到的数据，真郁闷。话说，更郁闷的是昨天拿来试这个功能的那个地址可以，要是昨天那个就不行了，我就不做了撒，诶。看来又要想东西做了 ，还是看看它和G家自己的东西能不能很好的结合吧…… 希望这两天的时间没有白费……</div>
    </section>

    

</article>


    <article class="post">

    <header>
        <h2 class="post-title"><a href='http://hzmangel.github.io/post/274/'> App Engine中后台任务的实现</a> </h2>
        <div class="post-meta">发表于2008-04-10 03:21:23 </div>
    </header>

    <section>
        <div class="post-summary">灌水灌上瘾了，没办法，呵呵，就再来一篇吧。 写的那个RSS聚合应用，想在后台运行一个单独的线程，用以从那些地址更新RSS信息，一开始很傻很天真的用thread来写，写了一半想起来了，去查查支持不支持。 去开发者论坛上一找background，还真有人在讨论。扫了一眼，就是现在还不支持，然后一帮人在Google Code的某个Issue上灌水，话说我也去加了一瓢，嘿嘿。 目前不支持，但我还是要用啊，继续转，果然找到了个折衷的方法，其实也很简单，就是把那个本来要写成thread的类映射到某个URL上，然后过一段时间访问一下，这 个可以在别的任何机器上用计划任务实现。刚试了一下，效果不错，暂时先这么用着吧，呵呵。</div>
    </section>

    

</article>


    <article class="post">

    <header>
        <h2 class="post-title"><a href='http://hzmangel.github.io/post/273/'> 在App Engine中访问外部网站</a> </h2>
        <div class="post-meta">发表于2008-04-10 03:16:13 </div>
    </header>

    <section>
        <div class="post-summary">下午做RSS聚合网站时，需要从外部的地址抓feed，用的是feedparse的库。但是怎么弄都出错，所以很郁闷，想从RSS的字符串解析一次，看看有没有错。想 当然的使用了urllib，结果它也出错。由于有了昨天模板的经验，所以直接去找google的文档。果不其然，它不支持直接从外网获取内容，如果有此需求，则需要使 用它封装好的一个urlfetch库中的fecth方法。没办法啊，那就用吧，谁让人家的地盘人家做主呢。 抓取内容，判定返回值是否为200，取结果，到这一切顺利，于是就开始用feedparse解析。解析也没问题，但是郁闷的是，这样解析出来的东西没有时间信息了，就 是它得不到这个RSS的最后更新时间，去urlfetch的文档里面转了一圈，也没见有相关的内容，只好自己另想办法了。最后的解决办法是在FeedInfo中加入了 一个字段用以存放最后更新的时间，然后拿feed中的每个文章的updated_parse时间与这个时间比较，如果文章的时间较新则插入库中，否则不处理。在写时候 漏掉一条语句，调了好长时间，真郁闷。 PS：logging真的很好用，直接在服务器的终端窗口输出信息。其实我本来是想用printf的，结果伊居然不支持，FT。 PS2：如果loggin的消息调成debug，则在开服务器的时候需要加上- d选项，否则DEBUG的信息不输出，我为这折腾了10分钟，那几条logging语句一会加上一会删除，心里还直嘀咕，难道又被我找到个BUG&hellip;&hellip;.</div>
    </section>

    

</article>


    <article class="post">

    <header>
        <h2 class="post-title"><a href='http://hzmangel.github.io/post/272/'> 在App Engine中使用数据库</a> </h2>
        <div class="post-meta">发表于2008-04-10 03:04:57 </div>
    </header>

    <section>
        <div class="post-summary">下午想了好久，才想到做一个类似Planet的Blog聚合的东西，也算是给自己玩玩吧。看了一下文档，它不支持往主机中写文件，如果需要存放数据的话，需要使用它的 Datastore，其实就是后台给提供个数据库，这样也好，也算方便管理吧。 动手写了写，大概需要两张表，一张表维护feed的信息，另一张表存放文章的信息，反正目前是这样的，以后有什么再加吧，呵呵。和Django中类似，直接用一个cl ass表示一张表，而且也是分多种字段值，无外乎就是那些啥个文本啊，数字啊，链接啥的，与Django不同的是它需要根据字段值的不同构建一个db下某个模块的实例 。还有一个reference字段类型用来表示关联表，它存放的另一张表中的某个字段值的key。大概是因为还算比较熟悉Django的数据库模块，所以没感觉到有啥 困难。有DB就需要有查询，App Engine的查询使用的是像Django中的模块，或者使用GQL语言，和SQL类似，不过它的文档中只有SELECT，而没有 其它的诸如INSERT，UPDATE啥，不过如果需要更改数据的值可以先查询，然后直接对结果进行赋值操作后调用put操作即可。用起来还是满简单的，呵呵，反正大 概能满足我的要求了。</div>
    </section>

    

</article>


    <article class="post">

    <header>
        <h2 class="post-title"><a href='http://hzmangel.github.io/post/271/'> App Engine 的模板支持......</a> </h2>
        <div class="post-meta">发表于2008-04-09 02:51:20 </div>
    </header>

    <section>
        <div class="post-summary">是支持模板了，但是居然只支持把模板放在工程的根目录，好像是权限的原因。郁闷啊，想好的目录结构就这样被破坏了，还好支持把css等静态文件扔在别的文件夹。明天折 腾折腾UI吧，困了，睡觉。</div>
    </section>

    

</article>


    <article class="post">

    <header>
        <h2 class="post-title"><a href='http://hzmangel.github.io/post/270/'> 在 App Engine 中使用模板和静态文件</a> </h2>
        <div class="post-meta">发表于2008-04-09 02:21:49 </div>
    </header>

    <section>
        <div class="post-summary">看到App Engine支持模板，扫了一眼，和Django的就是一样的，它下面的链接也直接说了，用的就是Django的模板系统。看来这次又有便宜可占了，直接 上手，不错不错。 和Django中一样，需要使用静态文件，但是在yaml文件中设置了static_dir再起服务器死活就是开不起来，直接去google.com找未果，然后想到 了它的开发group，果然碰到一群和我碰到同样问题的人。后来好像说原因是因为Windowz下用的是 \ 作为路径分隔符，在某个正则中变了转义，所以就那个啥了 。一种解决方法是在yaml文件中把所有的静态文件写进去，看着头就大；还好有人想到了用正则，于是就有了一种新的方法。 - url: /stylesheets/(.*) static_files: stylesheets/\1 upload: stylesheets/(.*) 查了一下，upload参数的意思没看太明白，好像是说如果文件匹配此参数后面的正则，就被这个handler接管，主要用处是确定和url和static_file s后面正则匹配的路径对应于哪个文件。汗自己的英语理解力，反正先用上了，确定能用了。然后按教程中写的，直接渲染吧。 居然发现了一个bug，呵呵，有意思。</div>
    </section>

    

</article>


    <article class="post">

    <header>
        <h2 class="post-title"><a href='http://hzmangel.github.io/post/268/'> 初用 Google App Engine</a> </h2>
        <div class="post-meta">发表于2008-04-09 00:27:00 </div>
    </header>

    <section>
        <div class="post-summary">在邮件列表中看到了这个东西，感觉满好玩的，是用python的，也满合胃口的，申请了一下，然后过了一会拿到的许可。有人说是在后台有一个sleep 3000，呵呵，不知道是真的假的。反正我是有了，用着玩玩吧。 下载了SDK，没细看里面的目录结构，只是知道里面有一个脚本可以当作开发时的服务器，还有一个脚本可以用以把文件上传。网站上有一个教程，老例子，上来先是一个he lloworld。它的工程中需要有一个app.yaml用以标识工程的ID，刚写的那个yaml文件如下： application: sonic version: 1 runtime: python api_version: 1 handlers: - url: /.* script: helloworld.py version是工程的版本，runtime version和api_version这俩目前只有一种选择，不知道以后会不会更改。然后就是写主要的部分了，han dlers。首先是以减号开始，后跟url关键字，冒号后是正则的URL列表，下一行的script是标明处理这个URL的脚本，后面自己写的。如果在url字段中用 了正则表达式，则将请求传入脚本时会自动将匹配的字符串作为参数。后面的那些静态文件和登录啥的没细看，看到再写。 然后就是里面的helloworld.py文件了，最简单的就是三个print，当时看到我直接喷了，真的。 简单的不能再简单的代码了。 print 'Content-Type: text/plain' print '' print 'Hello, world!' 反正就是这么简单。然后运行它的那个简单的服务器，运行时需要指明工程的目录，即包含有app.yaml文件的目录。运行后就可以通过浏览访问8080端口来测试服务 了。还好第二个程序算是有点内容了，虽然也还是HelloWorld，但是它用了webapp的框架，代码量也有点多了。 import wsgiref.handlers from google.appengine.ext import webapp class MainPage(webapp.RequestHandler): def get(self): self.response.headers['Content-Type'] = 'text/plain' self.response.out.write('Hello, webapp World!') def main(): application = webapp.WSGIApplication([('/', MainPage)], debug=True) wsgiref.handlers.CGIHandler().run(application) if __name__ == &quot;__main__&quot;: main() 在main函数中，应该是通过WSGIApplication确定了对于某些特定的请求，使用哪个类来处理，get()方法用于响应HTTP GET的请求，其它的函数还没细看。返回结果和上一个差不多，嗯。 最后需要把程序部署到google的服务器上，使用它的appcfg.py上传，需要把app.yaml中的那个application改成申请下来的id，然后上传 ，输入邮箱，密码啥的。然后就可以通过 http://.appspot.com/ 访问了。满好玩的，继续折腾。</div>
    </section>

    

</article>


    <article class="post">

    <header>
        <h2 class="post-title"><a href='http://hzmangel.github.io/post/267/'> Python取当前循环次数</a> </h2>
        <div class="post-meta">发表于2008-04-05 15:08:14 </div>
    </header>

    <section>
        <div class="post-summary">在groups上瞎逛，看到了这个，觉得满有用的，于是复制到这里一份。 在循环中使用enumerate可以同时取得循环次数和循环变量的值，使用方法是这样的 1 for i,v in enumerate(['a','b']): 2 print i,v 内置的函数，从2.3版加上去的。在这记一笔……</div>
    </section>

    

</article>


    <article class="post">

    <header>
        <h2 class="post-title"><a href='http://hzmangel.github.io/post/266/'> 没有雨的清明</a> </h2>
        <div class="post-meta">发表于2008-04-05 01:02:37 </div>
    </header>

    <section>
        <div class="post-summary">应该是在北京过的第七个清明吧，只知道这是第一个有假放的清明，于是乎，北京的大街小巷上又充斥着一堆一堆又一堆的人，各种口音，各种肤色，把本就已经熙熙攘攘的街道 ，商场，景点等能放的下人的地方，变的更加拥挤。 在来北京之前，一直固执的认为，清明就应该是在如丝的细雨中度过的，静静的小雨，把天地间的一切东西都蒙在一层淡淡的雾中。行走在雨中，能感觉到轻抚在身上的雨丝，很 舒服。在脑海中还会浮现出这样一个场景：一个牧童，骑在青牛上，吹着用青竹削制的牧笛（指不指杏花村，无所谓了啦）。这一切就是是一幅活动的水墨画卷。丝丝的小雨在我 们那倒是比较常见，刚好清明前后那几天总会有几天大概是样的天气，所以也就一直没有更改自己的想法。但是等到了这边，才知道，清明并不是非要雨纷纷的，太阳公公在这段 时间也是可以露脸的，虽然感觉有些不舒服。其实感觉到更不舒服的就是太阳公公好勤劳啊，一年365天基本上天天上班。 已经忘记了江南水乡的春天，7年的日子，改变了我很多，虽然没有真正喜欢上这个地方，但是还是慢慢的在被迫熟悉于它的一切。就要走到人生的第一个转折点了，希望我能走 好，不知道几年后，我会不会对这个地方产生感情，同样也不知道几年后，我是否会换一个地方继续漂着，还有不知道几年后，我会走哪一条路，做什么样的工作。太多的不确定 因素，使我已经不敢对我的未来做出期望，最多也就是可以在脑海中憧憬一下某些场景，然后继续回到残酷的现实中，是不是只有等自己过上了清明节，才能说的上是不会变了呢 ，因为大家都说盖棺定论嘛…… 也已经有7年没有在清明的时候，给家里面那些搬到另一个世界的老人们烧纸了，虽然知道这也许只是一种给活人的寄托，但是，又没有理由让它消失，那就放那放着吧。怀念爷 爷他们，不知道在那边过的好不好（老人家好像没托梦，应该还行吧，呵呵），晚辈在此给您几位请安了。 PS1：发现自己总是忘不了家乡的春雨，都快成月经贴了…… PS2：同样固执的认为，清明就是在4月5号，但是今天从老妈的电话中得知，今年的清明是今天…… PS3：阳光明媚的清明，总是找不到某些感觉，加上现在的假期，估计以后就更难找了。话说，哪怕给个阴天也好啊……</div>
    </section>

    

</article>



<nav id="pager">
    <div class="row">
        <div class="col-md-6">
            
                <h4><a href="/page/19/">上一页</a></h4>
            
        </div>

        <div class="col-md-6">
            
                <h4 class="text-right"><a href="/page/21/">下一页</a></h4>
            
        </div>
    </div>
</nav>


        <footer class="site-footer clearfix">
            <div id="colophon">
                <section class="col-md-7">Copyright - ©2015 - hzmangel</section>
                
                    <i class="text-right"><section class="col-md-5">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/hzmangel/hugo-twenty-ten">ported Twenty Ten</a> theme</section></i>
                
            </div>
        </footer>

        <script src="http://code.jquery.com/jquery-git2.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="http://hzmangel.github.io/js/index.js"></script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-1847567-5', 'auto');
            ga('send', 'pageview');
        </script>

    </div> 

</body>
</html>

